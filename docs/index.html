<!DOCTYPE HTML><html><head><meta charset="utf-8"><style>body {
        margin: 0px;
        padding: 0px;
      }</style></head><body><canvas id="mainCanvas" width="640" height="640"></canvas><script>function Note(e){var t=e.split(space);this.frequency=Note.getFrequency(t[0])||0,this.duration=Note.getDuration(t[1])||0}function Sequence(e,t,i){this.ac=e||new AudioContext,this.createFxNodes(),this.tempo=t||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,i||[])}octave="B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb",openGuitar=["E2 q","A2 q","D3 q","G3 q","B3 q","E4 q"],eMaj=["E2 q","B2 q","E3 q","G#3 q","B3 q","E4 q"],eMin=["E2 q","B2 q","E3 q","G3 q","B3 q","E4 q"],fMaj=["E#2 q","B#3 q","E#3 q","A3 q","C4 q","F4 q"],fMin=["E#2 q","B#3 q","E#3 q","G#3 q","C4 q","F4 q"],aMin=["E2 q","A2 q","E3 q","A3 q","C q","E4 q"],aMin=["E2 q","A2 q","E3 q","A3 q","C4 q","E4 q"],cMaj=["G#2 q","C3 q","E3 q","G3 q","C4 q","E4 q"],dMaj=["E2 q","A2 q","D3 q","A3 q","D4 q","F#4 q"];var enharmonics="B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb",middleC=440*Math.pow(Math.pow(2,1/12),-9),numeric=/^[0-9.]+$/,octaveOffset=4,space=/\s+/,num=/(\d+)/,offsets={};enharmonics.split("|").forEach(function(e,t){e.split("-").forEach(function(e){offsets[e]=t})}),Note.getFrequency=function(e){var t=e.split(num),i=offsets[t[0]],s=(t[1]||octaveOffset)-octaveOffset,n=middleC*Math.pow(Math.pow(2,1/12),i);return n*Math.pow(2,s)},Note.getDuration=function(e){return numeric.test(e)?parseFloat(e):e.toLowerCase().split("").reduce(function(e,t){return e+("w"===t?4:"h"===t?2:"q"===t?1:"e"===t?.5:"s"===t?.25:0)},0)},Sequence.prototype.createFxNodes=function(){var e=[["bass",100],["mid",1e3],["treble",2500]],t=this.gain=this.ac.createGain();return e.forEach(function(e,i){i=this[e[0]]=this.ac.createBiquadFilter(),i.type="peaking",i.frequency.value=e[1],t.connect(t=i)}.bind(this)),t.connect(this.ac.destination),this},Sequence.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(e){this.notes.push(e instanceof Note?e:new Note(e))}.bind(this)),this},Sequence.prototype.createCustomWave=function(e,t){t||(t=e),this.waveType="custom",this.customWave=[new Float32Array(e),new Float32Array(t)]},Sequence.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},Sequence.prototype.scheduleNote=function(e,t){var i=60/this.tempo*this.notes[e].duration,s=i*(1-(this.staccato||0));return this.setFrequency(this.notes[e].frequency,t),this.smoothing&&this.notes[e].frequency&&this.slide(e,t,s),this.setFrequency(0,t+s),t+i},Sequence.prototype.getNextNote=function(e){return this.notes[e<this.notes.length-1?e+1:0]},Sequence.prototype.getSlideStartDelay=function(e){return e-Math.min(e,60/this.tempo*this.smoothing)},Sequence.prototype.slide=function(e,t,i){var s=this.getNextNote(e),n=this.getSlideStartDelay(i);return this.setFrequency(this.notes[e].frequency,t+n),this.rampFrequency(s.frequency,t+i),this},Sequence.prototype.setFrequency=function(e,t){return this.osc.frequency.setValueAtTime(e,t),this},Sequence.prototype.rampFrequency=function(e,t){return this.osc.frequency.linearRampToValueAtTime(e,t),this},Sequence.prototype.play=function(e){return e="number"==typeof e?e:this.ac.currentTime,this.createOscillator(),this.osc.start(e),this.notes.forEach(function(t,i){e=this.scheduleNote(i,e)}.bind(this)),this.osc.stop(e),this.osc.onended=this.loop?this.play.bind(this,e):null,this},Sequence.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this},TinyMusic={},TinyMusic.Note=Note,TinyMusic.Sequence=Sequence,function(){var e=document.getElementById("mainCanvas"),t=e.getContext("2d"),s=e.width/2,n=e.height/2,o=70;for(t.beginPath(),t.rect(0,0,2*s,2*n),t.fillStyle="grey",t.fill(),t.beginPath(),t.arc(s,n,1.3*o,0,2*Math.PI,!1),t.fillStyle="saddlebrown",t.fill(),t.lineWidth=5,t.strokeStyle="#003300",t.stroke(),t.beginPath(),t.arc(.6*s,1.4*n,2*o,0,2*Math.PI,!1),t.fillStyle="saddlebrown",t.fill(),t.lineWidth=5,t.strokeStyle="#003300",t.stroke(),t.beginPath(),t.arc(.6*s,1.4*n,.6*o,0,2*Math.PI,!1),t.fillStyle="black",t.fill(),t.lineWidth=5,t.strokeStyle="brown",t.stroke(),t.save(),t.translate(e.width/2,e.height/2),t.rotate(Math.PI/4),t.fillStyle="black",t.fillRect(-20,-300,40,500),i=0;i<35;++i)t.fillStyle=i%3?"white":"navy",t.fillRect(-18,-300+10*i,35,8);t.restore();var c=function(e,o){i=e,t.beginPath(),t.rect(.4*i*s,1.9*n,.4*s,.1*n),t.fillStyle=o||"white",t.strokeStyle="grey",t.fill(),t.stroke()};for(i=0;i<5;++i)c(i,"white");e.addEventListener("click",function(e){if(e.pageY>1.9*n){var t=Math.floor(e.pageX/(.4*s));c(t,"green")}})}(),ac=new AudioContext;var playNotes=function(e,t){var i=t||120,s=ac.currentTime+.5,n=new TinyMusic.Sequence(ac,i,e);n.loop=!1,n.staccato=.2,n.waveType="sawtooth",n.play(s)};openGuitar=["E2 q","A2 q","D3 q","G3 q","B3 q","E4 q"],gfather1=["B3 q","E4 q","G4 q","F#4 q","E4 q","G4 q","E4 q","F#4 q","E4 q","C4 q","D4 q","B3 q","- h"],gfather2=gfather1.slice(0,-4).concat(["B3 q","A#3 q","A3 q"]),house_rising1=aMin.slice(1,4).concat(aMin.slice(0).reverse().slice(0,3)),house_rising2=cMaj.slice(1,4).concat(aMin.slice(0).reverse().slice(0,3)),house_rising3=dMaj.slice(2,5).concat(dMaj.slice(0).reverse().slice(0,3)),house_rising4=fMaj.slice(0,1).concat(fMaj.slice(2,4),fMaj.slice(0).reverse().slice(0,3));</script></body></html>