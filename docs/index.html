<!DOCTYPE HTML><html><head><style>body {
        margin: 0px;
        padding: 0px;
      }</style></head><body><canvas id="mainCanvas" width="640" height="640"></canvas><script>function Note(e){var t=e.split(space);this.frequency=Note.getFrequency(t[0])||0,this.duration=Note.getDuration(t[1])||0}function Sequence(e,t,n){this.ac=e||new AudioContext,this.createFxNodes(),this.tempo=t||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,n||[])}octave="B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb",openGuitar=["E2 q","A2 q","D3 q","G3 q","B3 q","E4 q"],eMaj=["E2 q","B2 q","E3 q","G#3 q","B3 q","E4 q"],eMin=["E2 q","B2 q","E3 q","G3 q","B3 q","E4 q"],fMaj=["E#2 q","B#3 q","E#3 q","A3 q","C4 q","F4 q"],fMin=["E#2 q","B#3 q","E#3 q","G#3 q","C4 q","F4 q"],aMin=["E2 q","A2 q","E3 q","A3 q","C q","E4 q"],aMin=["E2 q","A2 q","E3 q","A3 q","C4 q","E4 q"],cMaj=["G#2 q","C3 q","E3 q","G3 q","C4 q","E4 q"],dMaj=["E2 q","A2 q","D3 q","A3 q","D4 q","F#4 q"];var enharmonics="B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb",middleC=440*Math.pow(Math.pow(2,1/12),-9),numeric=/^[0-9.]+$/,octaveOffset=4,space=/\s+/,num=/(\d+)/,offsets={};enharmonics.split("|").forEach(function(e,t){e.split("-").forEach(function(e){offsets[e]=t})}),Note.getFrequency=function(e){var t=e.split(num),n=offsets[t[0]],i=(t[1]||octaveOffset)-octaveOffset,s=middleC*Math.pow(Math.pow(2,1/12),n);return s*Math.pow(2,i)},Note.getDuration=function(e){return numeric.test(e)?parseFloat(e):e.toLowerCase().split("").reduce(function(e,t){return e+("w"===t?4:"h"===t?2:"q"===t?1:"e"===t?.5:"s"===t?.25:0)},0)},Sequence.prototype.createFxNodes=function(){var e=[["bass",100],["mid",1e3],["treble",2500]],t=this.gain=this.ac.createGain();return e.forEach(function(e,n){n=this[e[0]]=this.ac.createBiquadFilter(),n.type="peaking",n.frequency.value=e[1],t.connect(t=n)}.bind(this)),t.connect(this.ac.destination),this},Sequence.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(e){this.notes.push(e instanceof Note?e:new Note(e))}.bind(this)),this},Sequence.prototype.createCustomWave=function(e,t){t||(t=e),this.waveType="custom",this.customWave=[new Float32Array(e),new Float32Array(t)]},Sequence.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},Sequence.prototype.scheduleNote=function(e,t){var n=60/this.tempo*this.notes[e].duration,i=n*(1-(this.staccato||0));return this.setFrequency(this.notes[e].frequency,t),this.smoothing&&this.notes[e].frequency&&this.slide(e,t,i),this.setFrequency(0,t+i),t+n},Sequence.prototype.getNextNote=function(e){return this.notes[e<this.notes.length-1?e+1:0]},Sequence.prototype.getSlideStartDelay=function(e){return e-Math.min(e,60/this.tempo*this.smoothing)},Sequence.prototype.slide=function(e,t,n){var i=this.getNextNote(e),s=this.getSlideStartDelay(n);return this.setFrequency(this.notes[e].frequency,t+s),this.rampFrequency(i.frequency,t+n),this},Sequence.prototype.setFrequency=function(e,t){return this.osc.frequency.setValueAtTime(e,t),this},Sequence.prototype.rampFrequency=function(e,t){return this.osc.frequency.linearRampToValueAtTime(e,t),this},Sequence.prototype.play=function(e){return e="number"==typeof e?e:this.ac.currentTime,this.createOscillator(),this.osc.start(e),this.notes.forEach(function(t,n){e=this.scheduleNote(n,e)}.bind(this)),this.osc.stop(e),this.osc.onended=this.loop?this.play.bind(this,e):null,this},Sequence.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this},TinyMusic={},TinyMusic.Note=Note,TinyMusic.Sequence=Sequence;var canvas=document.getElementById("mainCanvas"),context=canvas.getContext("2d"),centerX=canvas.width/2,centerY=canvas.height/2,radius=70;context.beginPath(),context.rect(0,0,2*centerX,2*centerY),context.fillStyle="grey",context.fill(),context.beginPath(),context.arc(centerX,centerY,1.3*radius,0,2*Math.PI,!1),context.fillStyle="green",context.fill(),context.lineWidth=5,context.strokeStyle="#003300",context.stroke(),context.beginPath(),context.arc(.6*centerX,1.2*centerY,2*radius,0,2*Math.PI,!1),context.fillStyle="green",context.fill(),context.lineWidth=5,context.strokeStyle="#003300",context.stroke(),ac=new AudioContext;var playNotes=function(e,t){var n=t||120,i=ac.currentTime+.5,s=new TinyMusic.Sequence(ac,n,e);s.loop=!1,s.staccato=.2,s.waveType="sawtooth",s.play(i)};openGuitar=["E2 q","A2 q","D3 q","G3 q","B3 q","E4 q"],gfather1=["B3 q","E4 q","G4 q","F#4 q","E4 q","G4 q","E4 q","F#4 q","E4 q","C4 q","D4 q","B3 q","- h"],gfather2=gfather1.slice(0,-4).concat(["B3 q","A#3 q","A3 q"]),house_rising1=aMin.slice(1,4).concat(aMin.slice(0).reverse().slice(0,3)),house_rising2=cMaj.slice(1,4).concat(aMin.slice(0).reverse().slice(0,3)),house_rising3=dMaj.slice(2,5).concat(dMaj.slice(0).reverse().slice(0,3)),house_rising4=fMaj.slice(0,1).concat(fMaj.slice(2,4),fMaj.slice(0).reverse().slice(0,3));</script></body></html>